<div class="user-form">
    <div class="d-flex align-items-center p-2">
        <div>
            <img *ngIf="user?.avatar" [attr.src]="user?.avatar" class="user-form_avatar" />
            <div *ngIf="!user?.avatar" class="user-form_avatar picture">
                <span class="pi pi-user" style="font-size: 5rem;"></span>
            </div>
        </div>
        <app-upload-photo (uploadInput)="onSelectFile($event)"></app-upload-photo>
    </div>
    <form [formGroup]="userForm" autocomplete="off" >
        <fieldset >
            <div>
                <h3 class="userForm_subsection">Datos de Cuentas</h3>
                <hr/>
                <div class="d-flex">
                    <div class="form-group mr-3" [class.has-error]="userForm.get('userName').invalid && userForm.get('userName').touched">
                        <div class="d-inline-flex align-items-center">
                            <label for="userName" class="mr-2 user-form_label">Usuario</label>
                            <input type="text" 
                            class="form-control"
                             id="userName" 
                             autocomplete="off"
                             formControlName= "userName">
                        </div>
                        <div class="help-block text-right">
                            <div class="d-flex justify-content-end align-items-end" *ngIf="!userForm.get('userName').valid&&userForm.get('userName').touched">
                                <span *ngIf = "userForm.get('userName').errors['required']">El campo es requerido</span>
                                <span class="pi pi-exclamation-circle ml-2"></span>
                            </div>
                        </div>
                     </div>
                     <div class="form-group" [class.has-error]="userForm.get('password').invalid && userForm.get('password').touched">
                        <div class="d-inline-flex align-items-center">
                            <label for="password" class="mr-2 user-form_label">Contraseña</label>
                            <input type="password" 
                            class="form-control"
                             id="password" 
                             autocomplete="off"
                             formControlName= "password">
                        </div>
                        <div class="help-block text-right">
                            <div class="d-flex justify-content-end align-items-end" *ngIf="!userForm.get('password').valid&&userForm.get('password').touched">
                                <span *ngIf = "userForm.get('password').errors['required']">El campo es requerido</span>
                                <span class="pi pi-exclamation-circle ml-2"></span>
                            </div>
                        </div>
                     </div>
                </div>
            </div> 
            <div>
                <h3 class="userForm_subsection">Datos Personales</h3>
                <hr/>
                <div class="d-flex">
                    <div>
                        <div class="form-group mt-1" [class.has-error]="userForm.get('name').invalid && userForm.get('name').touched">
                            <div class="d-inline-flex align-items-center">
                                <label for="name" class="mr-2 user-form_label">Nombre</label>
                                <input type="text" 
                                class="form-control"
                                 id="name"
                                 autocomplete="off" 
                                 formControlName = "name">
                            </div>
                            <div class="help-block text-right">
                                <div class="d-flex justify-content-end align-items-end" *ngIf="!userForm.get('name').valid&&userForm.get('name').touched">
                                    <span *ngIf = "userForm.get('name').errors['required']">El campo es requerido</span>
                                    <span class="pi pi-exclamation-circle ml-2"></span>
                                </div>
                            </div>
                         </div>
    
                         <div class="form-group" [class.has-error]="userForm.get('lastName').invalid && userForm.get('lastName').touched">
                            <div class="d-inline-flex align-items-center">
                                <label for="lastName" class="mr-2 user-form_label">Apellido</label>
                                <input type="text" 
                                class="form-control"
                                autocomplete="off"
                                 id="lastName" 
                                 formControlName = "lastName">
                            </div>
                            <div class="help-block text-right">
                                <div class="d-flex justify-content-end align-items-end" *ngIf="!userForm.get('lastName').valid&&userForm.get('lastName').touched">
                                    <span *ngIf = "userForm.get('lastName').errors['required']">El campo es requerido</span>
                                    <span class="pi pi-exclamation-circle ml-2"></span>
                                </div>
                            </div>
                         </div>
                    </div>
                    <div>
                        <div class="form-group" [class.has-error]="userForm.get('email').invalid && userForm.get('email').touched">
                            <div class="d-inline-flex align-items-center">
                                <label for="email" class="mr-2 user-form_label">Email</label>
                                <input type="text" 
                                class="form-control"
                                autocomplete="off"
                                 id="email" 
                                 formControlName= "email">
                            </div>
                            <div class="help-block text-right">
                                <div class="d-flex justify-content-end align-items-end" *ngIf="!userForm.get('email').valid&&userForm.get('email').touched">
                                    <span *ngIf = "userForm.get('email').errors['required']">El campo es requerido</span>
                                    <span *ngIf = "userForm.get('email').errors['email']">Formato incorrecto</span>
                                    <span class="pi pi-exclamation-circle ml-2"></span>
                                </div>
                            </div>
                         </div>

                        <div class="form-group" [class.has-error]="userForm.get('phone').invalid && userForm.get('phone').touched">
                            <div class="d-inline-flex align-items-center">
                                <label for="phone" class="mr-2 user-form_label">Teléfono</label>
                                <input type="text" 
                                class="form-control"
                                 id="phone" 
                                 autocomplete="off"
                                 formControlName= "phone">
                            </div>
                            <div class="help-block text-right">
                                <div class="d-flex justify-content-end align-items-end" *ngIf="!userForm.get('phone').valid&&userForm.get('phone').touched">
                                    <span *ngIf = "userForm.get('phone').errors['required']">El campo es requerido</span>
                                    <span *ngIf = "userForm.get('phone').errors['pattern']">formato incorrecto, solo números</span>
                                    <span class="pi pi-exclamation-circle ml-2"></span>
                                </div>
                            </div>
                         </div>
                    </div>
                    <div>
                        <div class="form-group">
                            <div class="d-inline-flex align-items-center">
                                <label for="address" class="mr-2 user-form_label">Dirección</label>
                                <input type="text" 
                                autocomplete="off"
                                class="form-control"
                                 id="address" 
                                 formControlName= "address">
                            </div>
                         </div>
                    </div>
      
                </div>
            </div>              
            
    
            <div class="d-flex justify-content-end">
                <div class="d-inline-flex">
                    <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-text" (click)="closeDialog(false)"></button>
                    <button pButton pRipple label="Save" [disabled]="!userForm.valid" icon="pi pi-check" class="p-button-text" (click)="saveUser()"></button>
                </div>
            </div>
        </fieldset>
    </form>
</div>
